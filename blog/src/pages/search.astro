---
import BaseLayout from '@layouts/BaseLayout.astro';
const base = import.meta.env.BASE_URL;
---

<BaseLayout title="Search" description="Search all posts on AI Learning Blog">
  <h1>Search</h1>
  <div id="search" data-base={base}></div>
  <script is:inline>
    (function () {
      const el = document.getElementById('search');
      if (!el) return;
      const base = el.dataset.base || '/';

      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = base + 'pagefind/pagefind-ui.css';
      document.head.appendChild(link);

      const script = document.createElement('script');
      script.src = base + 'pagefind/pagefind-ui.js';
      script.onload = function () {
        if (typeof PagefindUI !== 'undefined') {
          new PagefindUI({ element: '#search', baseUrl: base, showImages: false });
        }
      };
      document.head.appendChild(script);
    })();
  </script>
</BaseLayout>

<style>
  h1 {
    font-size: 2rem;
    margin: 0 0 1.5rem;
  }

  :root {
    --pagefind-ui-scale: 0.9;
    --pagefind-ui-primary: var(--color-primary);
    --pagefind-ui-text: var(--color-text);
    --pagefind-ui-background: var(--color-bg);
    --pagefind-ui-border: var(--color-border);
    --pagefind-ui-tag: var(--color-bg-muted);
  }
</style>
